<UserControl x:Class="BetterGenshinImpact.View.Pages.View.ScriptGroupConfigView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:b="http://schemas.microsoft.com/xaml/behaviors"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:pages="clr-namespace:BetterGenshinImpact.ViewModel.Pages.View"
             xmlns:ui="http://schemas.lepo.co/wpfui/2022/xaml"
             Width="800"
             d:DataContext="{d:DesignInstance Type=pages:ScriptGroupConfigViewModel}"
             d:DesignHeight="1600"
             d:DesignWidth="800"
             ui:Design.Background="{DynamicResource ApplicationBackgroundBrush}"
             ui:Design.Foreground="{DynamicResource TextFillColorPrimaryBrush}"
             mc:Ignorable="d">
    <ScrollViewer Height="800"
                  d:DesignHeight="1600"
                  HorizontalScrollBarVisibility="Auto"
                  VerticalScrollBarVisibility="Auto">
        <StackPanel Height="Auto" Width="700" Margin="42,16,42,12">

            <ui:CardExpander Margin="0,0,0,12"
                             ContentPadding="0"
                             Icon="{ui:SymbolIcon Map24}">
                <ui:CardExpander.Header>
                    <Grid>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto" />
                            <RowDefinition Height="Auto" />
                        </Grid.RowDefinitions>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*" />
                            <ColumnDefinition Width="Auto" />
                        </Grid.ColumnDefinitions>
                        <ui:TextBlock Grid.Row="0"
                                      Grid.Column="0"
                                      FontTypography="Body"
                                      Text="Map Tracking行走Configuration（不启用则使用Map Tracking内的条件Configuration）"
                                      TextWrapping="Wrap" />
                        <ui:TextBlock Grid.Row="1"
                                      Grid.Column="0"
                                      Foreground="{ui:ThemeResource TextFillColorTertiaryBrush}"
                                      TextWrapping="Wrap">
                            Force Modify Team Slot for Shield/Healing Characters During Walking Config
                        </ui:TextBlock>
                        <ui:ToggleSwitch Grid.Row="0"
                                         Grid.RowSpan="2"
                                         Grid.Column="1"
                                         Margin="0,0,24,0"
                                         IsChecked="{Binding PathingConfig.Enabled, Mode=TwoWay}" />
                    </Grid>
                </ui:CardExpander.Header>
                <StackPanel>
                    <Grid Margin="16">
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto" />
                            <RowDefinition Height="Auto" />
                        </Grid.RowDefinitions>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*" />
                            <ColumnDefinition Width="Auto" />
                        </Grid.ColumnDefinitions>
                        <ui:TextBlock Grid.Row="0"
                                      Grid.Column="0"
                                      FontTypography="Body"
                                      Text="Enable Auto Pickup"
                                      TextWrapping="Wrap" />
                        <ui:TextBlock Grid.Row="1"
                                      Grid.Column="0"
                                      Foreground="{ui:ThemeResource TextFillColorTertiaryBrush}"
                                      Text="Recommended to Enable for Picking Up Drops/Materials Along Route"
                                      TextWrapping="Wrap" />
                        <ui:ToggleSwitch Grid.Row="0"
                                         Grid.RowSpan="2"
                                         Grid.Column="1"
                                         IsChecked="{Binding PathingConfig.AutoPickEnabled}" />
                    </Grid>
                    <Grid Margin="16">
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto" />
                            <RowDefinition Height="Auto" />
                        </Grid.RowDefinitions>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*" />
                            <ColumnDefinition Width="Auto" />
                        </Grid.ColumnDefinitions>
                        <ui:TextBlock Grid.Row="0"
                                      Grid.Column="0"
                                      FontTypography="Body"
                                      Text="YesNoEnable Auto Healing Items"
                                      TextWrapping="Wrap" />
                        <ui:TextBlock Grid.Row="1"
                                      Grid.Column="0"
                                      Foreground="{ui:ThemeResource TextFillColorTertiaryBrush}"
                                      Text="Auto Use Portable Nutrition Bag on Low HP"
                                      TextWrapping="Wrap" />
                        <ui:ToggleSwitch Grid.Row="0"
                                         Grid.RowSpan="2"
                                         Grid.Column="1"
                                         IsChecked="{Binding PathingConfig.AutoEatEnabled}" />
                    </Grid>
                    <Grid Margin="16">
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto" />
                            <RowDefinition Height="Auto" />
                        </Grid.RowDefinitions>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*" />
                            <ColumnDefinition Width="Auto" />
                        </Grid.ColumnDefinitions>
                        <ui:TextBlock Grid.Row="0"
                                      Grid.Column="0"
                                      FontTypography="Body"
                                      Text="Switch to Team Name (Empty = No Switch)"
                                      TextWrapping="Wrap" />
                        <ui:TextBlock Grid.Row="1"
                                      Grid.Column="0"
                                      Foreground="{ui:ThemeResource TextFillColorTertiaryBrush}"
                                      Text="Team Name as in in-game Manual Settings"
                                      TextWrapping="Wrap" />
                        <ui:TextBox Grid.Row="0"
                                    Grid.RowSpan="2"
                                    Grid.Column="1"
                                    MinWidth="200"
                                    Text="{Binding PathingConfig.PartyName}" />
                    </Grid>
                    <Grid Margin="16">
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto" />
                            <RowDefinition Height="Auto" />
                        </Grid.RowDefinitions>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*" />
                            <ColumnDefinition Width="Auto" />
                        </Grid.ColumnDefinitions>
                        <ui:TextBlock Grid.Row="0"
                                      Grid.Column="0"
                                      FontTypography="Body"
                                      Text="Move to Safe Statue Area Before Switching Team"
                                      TextWrapping="Wrap" />
                        <ui:TextBlock Grid.Row="1"
                                      Grid.Column="0"
                                      Foreground="{ui:ThemeResource TextFillColorTertiaryBrush}"
                                      Text="Switching Teams at Statue of Seven Avoids Errors"
                                      TextWrapping="Wrap" />
                        <ui:ToggleSwitch Grid.Row="0"
                                         Grid.RowSpan="2"
                                         Grid.Column="1"
                                         IsChecked="{Binding PathingConfig.IsVisitStatueBeforeSwitchParty}" />
                    </Grid>
                    <Grid Margin="16">
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto" />
                            <RowDefinition Height="Auto" />
                        </Grid.RowDefinitions>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*" />
                            <ColumnDefinition Width="Auto" />
                        </Grid.ColumnDefinitions>
                        <ui:TextBlock Grid.Row="0"
                                      Grid.Column="0"
                                      FontTypography="Body"
                                      Text="【Survival】Team Position Number"
                                      TextWrapping="Wrap" />
                        <ui:TextBlock Grid.Row="1"
                                      Grid.Column="0"
                                      Foreground="{ui:ThemeResource TextFillColorTertiaryBrush}"
                                      Text="Position of Shield/Healing Characters, Recommended: Qi Liangliang, Layla"
                                      TextWrapping="Wrap" />
                        <ComboBox Grid.Row="0"
                                  Grid.RowSpan="2"
                                  Grid.Column="1"
                                  MinWidth="100"
                                  ItemsSource="{Binding PathingConfig.AvatarIndexList}"
                                  SelectedItem="{Binding PathingConfig.GuardianAvatarIndex}" />
                    </Grid>
                    <Grid Margin="16">
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto" />
                            <RowDefinition Height="Auto" />
                        </Grid.RowDefinitions>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*" />
                            <ColumnDefinition Width="Auto" />
                        </Grid.ColumnDefinitions>
                        <ui:TextBlock Grid.Row="0"
                                      Grid.Column="0"
                                      FontTypography="Body"
                                      Text="【Survival】Element Skill Interval (Sec)"
                                      TextWrapping="Wrap" />
                        <ui:TextBlock Grid.Row="1"
                                      Grid.Column="0"
                                      Foreground="{ui:ThemeResource TextFillColorTertiaryBrush}"
                                      Text="Time May Be Slightly Longer Than Actual Skill CD"
                                      TextWrapping="Wrap" />
                        <ui:TextBox Grid.Row="0"
                                    Grid.RowSpan="2"
                                    Grid.Column="1"
                                    MinWidth="120"
                                    Text="{Binding PathingConfig.GuardianElementalSkillSecondInterval}" />
                    </Grid>
                    <Grid Margin="16">
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto" />
                            <RowDefinition Height="Auto" />
                        </Grid.RowDefinitions>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*" />
                            <ColumnDefinition Width="Auto" />
                        </Grid.ColumnDefinitions>
                        <ui:TextBlock Grid.Row="0"
                                      Grid.Column="0"
                                      FontTypography="Body"
                                      Text="【Survival】Hold Element Skill"
                                      TextWrapping="Wrap" />
                        <ui:TextBlock Grid.Row="1"
                                      Grid.Column="0"
                                      Foreground="{ui:ThemeResource TextFillColorTertiaryBrush}"
                                      Text="Zhongli Long Press Shield, Qi Liangliang Long Press Transform Cat, etc."
                                      TextWrapping="Wrap" />
                        <ui:ToggleSwitch Grid.Row="0"
                                         Grid.RowSpan="2"
                                         Grid.Column="1"
                                         IsChecked="{Binding PathingConfig.GuardianElementalSkillLongPress}"
                                         OffContent="Tap"
                                         OnContent="Long Press" />
                    </Grid>
                    <Grid Margin="16">
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto" />
                            <RowDefinition Height="Auto" />
                        </Grid.RowDefinitions>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*" />
                            <ColumnDefinition Width="Auto" />
                        </Grid.ColumnDefinitions>
                        <ui:TextBlock Grid.Row="0"
                                      Grid.Column="0"
                                      FontTypography="Body"
                                      Text="【Walk】Main Walking Character Index"
                                      TextWrapping="Wrap" />
                        <ui:TextBlock Grid.Row="1"
                                      Grid.Column="0"
                                      Foreground="{ui:ThemeResource TextFillColorTertiaryBrush}"
                                      Text="Recommended Same as Survival Position; No Special Config Needed"
                                      TextWrapping="Wrap" />
                        <ComboBox Grid.Row="0"
                                  Grid.RowSpan="2"
                                  Grid.Column="1"
                                  MinWidth="100"
                                  ItemsSource="{Binding PathingConfig.AvatarIndexList}"
                                  SelectedItem="{Binding PathingConfig.MainAvatarIndex}" />
                    </Grid>

                    <Grid Margin="16">
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto" />
                            <RowDefinition Height="Auto" />
                        </Grid.RowDefinitions>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*" />
                            <ColumnDefinition Width="Auto" />
                        </Grid.ColumnDefinitions>
                        <ui:TextBlock Grid.Row="0"
                                      Grid.Column="0"
                                      FontTypography="Body"
                                      Text="Interval Between Item Uses (ms)"
                                      TextWrapping="Wrap" />
                        <ui:TextBlock Grid.Row="1"
                                      Grid.Column="0"
                                      Foreground="{ui:ThemeResource TextFillColorTertiaryBrush}"
                                      Text="Auto Use Items While Moving; 0 = Do Not Use"
                                      TextWrapping="Wrap" />
                        <ui:TextBox Grid.Row="0"
                                    Grid.RowSpan="2"
                                    Grid.Column="1"
                                    MinWidth="100"
                                    Text="{Binding PathingConfig.UseGadgetIntervalMs, Mode=TwoWay}"
                                    TextWrapping="NoWrap" />
                    </Grid>

                    <Grid Margin="16">
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto" />
                            <RowDefinition Height="Auto" />
                        </Grid.RowDefinitions>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*" />
                            <ColumnDefinition Width="Auto" />
                        </Grid.ColumnDefinitions>
                        <ui:TextBlock Grid.Row="0"
                                      Grid.Column="0"
                                      FontTypography="Body"
                                      Text="Heal Only at Teleport Waypoints"
                                      TextWrapping="Wrap" />
                        <ui:TextBlock Grid.Row="1"
                                      Grid.Column="0"
                                      Foreground="{ui:ThemeResource TextFillColorTertiaryBrush}"
                                      Text="Only Restore at Statue of Seven When Path at Teleport"
                                      TextWrapping="Wrap" />
                        <ui:ToggleSwitch Grid.Row="0"
                                         Grid.RowSpan="2"
                                         Grid.Column="1"
                                         IsChecked="{Binding PathingConfig.OnlyInTeleportRecover, Mode=TwoWay}" />

                    </Grid>
                    <Grid Margin="16">
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto" />
                            <RowDefinition Height="Auto" />
                        </Grid.RowDefinitions>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*" />
                            <ColumnDefinition Width="Auto" />
                        </Grid.ColumnDefinitions>
                        <ui:TextBlock Grid.Row="0"
                                      Grid.Column="0"
                                      FontTypography="Body"
                                      Text="Do Not Execute at Certain Times"
                                      TextWrapping="Wrap" />
                        <ui:TextBlock Grid.Row="1"
                                      Grid.Column="0"
                                      Foreground="{ui:ThemeResource TextFillColorTertiaryBrush}"
                                      Text="当执行完一个路线后，如果时间为当前Configuration的时间（范围：0-23），则此Map Tracking任务后续都将都跳过，适用于Continuous Execution的兜底任务，例如想通宵挂机，并And在4点后，开始执行新的任务。"
                                      TextWrapping="Wrap" />
                        <ui:TextBox Grid.Row="0"
                                    Grid.RowSpan="2"
                                    Grid.Column="1"
                                    MinWidth="100"
                                    Text="{Binding PathingConfig.SkipDuring, Mode=TwoWay}"
                                    TextWrapping="NoWrap" />
                    </Grid>
                    <Grid Margin="16">
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto" />
                            <RowDefinition Height="Auto" />
                        </Grid.RowDefinitions>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*" />
                            <ColumnDefinition Width="Auto" />
                        </Grid.ColumnDefinitions>
                        <ui:TextBlock Grid.Row="0"
                                      Grid.Column="0"
                                      FontTypography="Body"
                                      Text="Hide From Continuous Tasks"
                                      TextWrapping="Wrap" />
                        <ui:TextBlock Grid.Row="1"
                                      Grid.Column="0"
                                      Foreground="{ui:ThemeResource TextFillColorTertiaryBrush}"
                                      Text="Hide This Config Group When Using Continuous Execution"
                                      TextWrapping="Wrap" />
                        <ui:ToggleSwitch Grid.Row="0"
                                         Grid.RowSpan="2"
                                         Grid.Column="1"
                                         IsChecked="{Binding PathingConfig.HideOnRepeat, Mode=TwoWay}" />

                    </Grid>
                                       <!-- Execute CycleConfiguration -->
                    <Grid Margin="16">

                        <ui:CardExpander Margin="0,0,36,12"
                                         ContentPadding="0"
                                         IsExpanded="False">

                            <ui:CardExpander.Header>
                                <Grid>

                                    <Grid.RowDefinitions>
                                        <RowDefinition Height="Auto" />
                                        <RowDefinition Height="Auto" />
                                    </Grid.RowDefinitions>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*" />
                                        <ColumnDefinition Width="Auto" />
                                    </Grid.ColumnDefinitions>
                                    <ui:TextBlock Grid.Row="0"
                                                  Grid.Column="0"
                                                  FontTypography="Body"
                                                  Text="Execute CycleConfiguration"
                                                  TextWrapping="Wrap" />
                                    <ui:TextBlock Grid.Row="1"
                                                  Grid.Column="0"
                                                  Foreground="{ui:ThemeResource TextFillColorTertiaryBrush}"
                                                  Text="Execute Config Group by Day"
                                                  TextWrapping="Wrap" />
                                    <ui:ToggleSwitch Grid.Row="0"
                                                     Grid.RowSpan="2"
                                                     Grid.Column="1"
                                                     Margin="0,0,24,0"
                                                     IsChecked="{Binding PathingConfig.TaskCycleConfig.Enable, Mode=TwoWay}" />
                                </Grid>
                            </ui:CardExpander.Header>
                            <StackPanel>
                                <Grid Margin="16">
                                    <Grid.RowDefinitions>
                                        <RowDefinition Height="Auto" />
                                        <RowDefinition Height="Auto" />
                                    </Grid.RowDefinitions>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*" />
                                        <ColumnDefinition Width="Auto" />
                                    </Grid.ColumnDefinitions>
                                    <ui:TextBlock Grid.Row="0"
                                                  Grid.Column="0"
                                                  FontTypography="Body"
                                                  Text="Boundary Time"
                                                  TextWrapping="Wrap" />
                                    <ui:TextBlock Grid.Row="1"
                                                  Grid.Column="0"
                                                  Foreground="{ui:ThemeResource TextFillColorTertiaryBrush}"
                                                  Text="Boundary Time, usually 0 or 4; 0 counts from 0:00, 4 counts from 4:00 AM; before 4 AM counts as previous day"
                                                  TextWrapping="Wrap" />
                                    <ui:TextBox Grid.Row="0"
                                                Grid.RowSpan="2"
                                                Grid.Column="1"
                                                MinWidth="120"
                                                Text="{Binding PathingConfig.TaskCycleConfig.BoundaryTime}" />
                                </Grid>
                                <Grid Margin="16">
                                    <Grid.RowDefinitions>
                                        <RowDefinition Height="Auto" />
                                        <RowDefinition Height="Auto" />
                                    </Grid.RowDefinitions>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*" />
                                        <ColumnDefinition Width="Auto" />
                                    </Grid.ColumnDefinitions>
                                    <ui:TextBlock Grid.Row="0"
                                                  Grid.Column="0"
                                                  FontTypography="Body"
                                                  Text="Cycle"
                                                  TextWrapping="Wrap" />
                                    <ui:TextBlock Grid.Row="1"
                                                  Grid.Column="0"
                                                  Foreground="{ui:ThemeResource TextFillColorTertiaryBrush}"
                                                  Text="Different Materials Have Different Cycles; Configure As Needed, e.g., Ore=3, Ascension=2, Or Choose Your Own"
                                                  TextWrapping="Wrap" />
                                    <ui:TextBox Grid.Row="0"
                                                Grid.RowSpan="2"
                                                Grid.Column="1"
                                                MinWidth="120"
                                                Text="{Binding PathingConfig.TaskCycleConfig.Cycle}" />
                                </Grid>
                                <Grid Margin="16">
                                    <Grid.RowDefinitions>
                                        <RowDefinition Height="Auto" />
                                        <RowDefinition Height="Auto" />
                                    </Grid.RowDefinitions>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*" />
                                        <ColumnDefinition Width="Auto" />
                                    </Grid.ColumnDefinitions>
                                    <ui:TextBlock Grid.Row="0"
                                                  Grid.Column="0"
                                                  FontTypography="Body"
                                                  Text="Execution Index"
                                                  TextWrapping="Wrap" />
                                    <ui:TextBlock Grid.Row="1"
                                                  Grid.Column="0"
                                                  Foreground="{ui:ThemeResource TextFillColorTertiaryBrush}"
                                                  Text="Execute Cycle序号，按时间戳对应的天数(会根据Boundary Time修正)，对Cycle求余值加1，得出的值和Configuration执一致就会执行，No则跳过任务。可以理解为Cycle内第几天执行。"
                                                  TextWrapping="Wrap" />
                                    <ui:TextBox Grid.Row="0"
                                                Grid.RowSpan="2"
                                                Grid.Column="1"
                                                MinWidth="120"
                                                Text="{Binding PathingConfig.TaskCycleConfig.Index}" />
                                </Grid>
                                 <Grid Margin="16">
                                    <Grid.RowDefinitions>
                                        <RowDefinition Height="Auto" />
                                        <RowDefinition Height="Auto" />
                                    </Grid.RowDefinitions>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*" />
                                        <ColumnDefinition Width="Auto" />
                                        <ColumnDefinition Width="Auto" />
                                        <ColumnDefinition Width="Auto" />
                                    </Grid.ColumnDefinitions>
                                    <ui:TextBlock Grid.Row="0"
                                                  Grid.Column="0"
                                                  FontTypography="Body"
                                                  Text="Calculate Today&apos;s Execution Index"
                                                  TextWrapping="Wrap" />
                                    <ui:TextBlock Grid.Row="1"
                                                  Grid.Column="0"
                                                  Foreground="{ui:ThemeResource TextFillColorTertiaryBrush}"
                                                  Text="Click Calculate to get today&apos;s Execution Index (day within Cycle)"
                                                  TextWrapping="Wrap" />
                                    <ui:Button Grid.Row="0"
                                               Grid.RowSpan="2"
                                               Grid.Column="1"
                                               Margin="0,0,12,0"
                                               Command="{Binding GetExecutionOrderCommand}"
                                               Content="Calculate"
                                               Icon="{ui:SymbolIcon Archive24}" />
                                   </Grid>
                               
                            </StackPanel>
                        </ui:CardExpander>

                    </Grid>
                                       
                                       
                                       <!-- Skip Execution Config -->
                    <Grid Margin="16">

                        <ui:CardExpander Margin="0,0,36,12"
                                         ContentPadding="0"
                                         IsExpanded="False">

                            <ui:CardExpander.Header>
                                <Grid>

                                    <Grid.RowDefinitions>
                                        <RowDefinition Height="Auto" />
                                        <RowDefinition Height="Auto" />
                                    </Grid.RowDefinitions>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*" />
                                        <ColumnDefinition Width="Auto" />
                                    </Grid.ColumnDefinitions>
                                    <ui:TextBlock Grid.Row="0"
                                                  Grid.Column="0"
                                                  FontTypography="Body"
                                                  Text="Skip Execution Config"
                                                  TextWrapping="Wrap" />
                                    <ui:TextBlock Grid.Row="1"
                                                  Grid.Column="0"
                                                  Foreground="{ui:ThemeResource TextFillColorTertiaryBrush}"
                                                  Text="Skip Scheduler tasks completed within specified time; path tracking requires full path completion"
                                                  TextWrapping="Wrap" />
                                    <ui:ToggleSwitch Grid.Row="0"
                                                     Grid.RowSpan="2"
                                                     Grid.Column="1"
                                                     Margin="0,0,24,0"
                                                     IsChecked="{Binding PathingConfig.TaskCompletionSkipRuleConfig.Enable, Mode=TwoWay}" />
                                </Grid>
                            </ui:CardExpander.Header>
                            <StackPanel>
                                <Grid Margin="16">
                                    <Grid.RowDefinitions>
                                        <RowDefinition Height="Auto" />
                                        <RowDefinition Height="Auto" />
                                    </Grid.RowDefinitions>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*" />
                                        <ColumnDefinition Width="Auto" />
                                    </Grid.ColumnDefinitions>
                                    <ui:TextBlock Grid.Row="0"
                                                  Grid.Column="0"
                                                  FontTypography="Body"
                                                  Text="Skip Execution Strategy"
                                                  TextWrapping="Wrap" />
                                    <ui:TextBlock Grid.Row="1"
                                                  Grid.Column="0"
                                                  Foreground="{ui:ThemeResource TextFillColorTertiaryBrush}"
                                                  Text="Skip Tasks Based on Strategy"
                                                  TextWrapping="Wrap" />
                                    <ComboBox Grid.Row="0"
                                              Grid.RowSpan="2"
                                              Grid.Column="1"
                                              MinWidth="100"
                                              SelectedValuePath="Key"
                                              DisplayMemberPath="Value"
                                              ItemsSource="{Binding SkipPolicySource}"
                                              SelectedValue="{Binding PathingConfig.TaskCompletionSkipRuleConfig.SkipPolicy}" />
                                </Grid>
                                <Grid Margin="16">
                                    <Grid.RowDefinitions>
                                        <RowDefinition Height="Auto" />
                                        <RowDefinition Height="Auto" />
                                    </Grid.RowDefinitions>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*" />
                                        <ColumnDefinition Width="Auto" />
                                    </Grid.ColumnDefinitions>
                                    <ui:TextBlock Grid.Row="0"
                                                  Grid.Column="0"
                                                  FontTypography="Body"
                                                  Text="Boundary Time"
                                                  TextWrapping="Wrap" />
                                    <ui:TextBlock Grid.Row="1"
                                                  Grid.Column="0"
                                                  Foreground="{ui:ThemeResource TextFillColorTertiaryBrush}"
                                                  Text="Boundary Time, 0 or 4; negative or &gt;23 disables; used for fixed refresh time and non-repeating within a day"
                                                  TextWrapping="Wrap" />
                                    <ui:TextBox Grid.Row="0"
                                                Grid.RowSpan="2"
                                                Grid.Column="1"
                                                MinWidth="120"
                                                Text="{Binding PathingConfig.TaskCompletionSkipRuleConfig.BoundaryTime}" />
                                </Grid>
                                <Grid Margin="16">
                                    <Grid.RowDefinitions>
                                        <RowDefinition Height="Auto" />
                                        <RowDefinition Height="Auto" />
                                    </Grid.RowDefinitions>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*" />
                                        <ColumnDefinition Width="Auto" />
                                    </Grid.ColumnDefinitions>
                                    <ui:TextBlock Grid.Row="0"
                                                  Grid.Column="0"
                                                  FontTypography="Body"
                                                  Text="Interval Since Last Run (Seconds)"
                                                  TextWrapping="Wrap" />
                                    <ui:TextBlock Grid.Row="1"
                                                  Grid.Column="0"
                                                  Foreground="{ui:ThemeResource TextFillColorTertiaryBrush}"
                                                  Text="Skip Execution if Interval &lt; Config Time; Negative = Disabled; Seconds Used for Precision"
                                                  TextWrapping="Wrap" />
                                    <ui:TextBox Grid.Row="0"
                                                Grid.RowSpan="2"
                                                Grid.Column="1"
                                                MinWidth="120"
                                                Text="{Binding PathingConfig.TaskCompletionSkipRuleConfig.LastRunGapSeconds}" />
                                </Grid>
                                <Grid Margin="16">
                                    <Grid.RowDefinitions>
                                        <RowDefinition Height="Auto" />
                                        <RowDefinition Height="Auto" />
                                    </Grid.RowDefinitions>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*" />
                                        <ColumnDefinition Width="Auto" />
                                    </Grid.ColumnDefinitions>
                                    <ui:TextBlock Grid.Row="0"
                                                  Grid.Column="0"
                                                  FontTypography="Body"
                                                  Text="Interval Time Reference for Calculation"
                                                  TextWrapping="Wrap" />
                                    <ui:TextBlock Grid.Row="1"
                                                  Grid.Column="0"
                                                  Foreground="{ui:ThemeResource TextFillColorTertiaryBrush}"
                                                  Text="Interval calculation based on start or end time according to configuration"
                                                  TextWrapping="Wrap" />
                                    <ComboBox Grid.Row="0"
                                              Grid.RowSpan="2"
                                              Grid.Column="1"
                                              MinWidth="100"
                                              SelectedValuePath="Key"
                                              DisplayMemberPath="Value"
                                              ItemsSource="{Binding ReferencePointSource}"
                                              SelectedValue="{Binding PathingConfig.TaskCompletionSkipRuleConfig.ReferencePoint}" />
                                </Grid>
                            </StackPanel>
                        </ui:CardExpander>

                    </Grid>        
                                       <!-- Prioritize Other Config Groups -->
                     <Grid Margin="16">

                        <ui:CardExpander Margin="0,0,36,12"
                                         ContentPadding="0"
                                         IsExpanded="False">

                            <ui:CardExpander.Header>
                                <Grid>

                                    <Grid.RowDefinitions>
                                        <RowDefinition Height="Auto" />
                                        <RowDefinition Height="Auto" />
                                    </Grid.RowDefinitions>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*" />
                                        <ColumnDefinition Width="Auto" />
                                    </Grid.ColumnDefinitions>
                                    <ui:TextBlock Grid.Row="0"
                                                  Grid.Column="0"
                                                  FontTypography="Body"
                                                  Text="Prioritize Other Config Groups"
                                                  TextWrapping="Wrap" />
                                    <ui:TextBlock Grid.Row="1"
                                                  Grid.Column="0"
                                                  Foreground="{ui:ThemeResource TextFillColorTertiaryBrush}"
                                                  Text="每个任务开始前，会先检查优先执行的其他Configuration Group，YesNo有任务可以执行，如果可以执行，则会先执行其他Configuration Group的任务，所Configuration的其他任务组，必须开启Skip Execution Config，不支持套娃，才会生效。可用于卡时间、优先材料等提高收益。"
                                                  TextWrapping="Wrap" />
                                    <ui:ToggleSwitch Grid.Row="0"
                                                     Grid.RowSpan="2"
                                                     Grid.Column="1"
                                                     Margin="0,0,24,0"
                                                     IsChecked="{Binding PathingConfig.PreExecutionPriorityConfig.Enabled, Mode=TwoWay}" />
                                </Grid>
                            </ui:CardExpander.Header>
                            <StackPanel>
                                <Grid Margin="16">
                                    <Grid.RowDefinitions>
                                        <RowDefinition Height="Auto" />
                                        <RowDefinition Height="Auto" />
                                    </Grid.RowDefinitions>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*" />
                                        <ColumnDefinition Width="Auto" />
                                    </Grid.ColumnDefinitions>
                                    <ui:TextBlock Grid.Row="0"
                                                  Grid.Column="0"
                                                  FontTypography="Body"
                                                  Text="Configuration GroupName"
                                                  TextWrapping="Wrap" />
                                    <ui:TextBlock Grid.Row="1"
                                                  Grid.Column="0"
                                                  Foreground="{ui:ThemeResource TextFillColorTertiaryBrush}"
                                                  Text="Configuration Group名，多个用逗号分隔，只有开启Skip Execution Config，才会生效。"
                                                  TextWrapping="Wrap" />
                                    <ui:TextBox Grid.Row="0"
                                                Grid.RowSpan="2"
                                                Grid.Column="1"
                                                MinWidth="120"
                                                Text="{Binding PathingConfig.PreExecutionPriorityConfig.GroupNames}" />
                                </Grid>
                                <Grid Margin="16">
                                    <Grid.RowDefinitions>
                                        <RowDefinition Height="Auto" />
                                        <RowDefinition Height="Auto" />
                                    </Grid.RowDefinitions>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*" />
                                        <ColumnDefinition Width="Auto" />
                                    </Grid.ColumnDefinitions>
                                    <ui:TextBlock Grid.Row="0"
                                                  Grid.Column="0"
                                                  FontTypography="Body"
                                                  Text="Extra Execution Count"
                                                  TextWrapping="Wrap" />
                                    <ui:TextBlock Grid.Row="1"
                                                  Grid.Column="0"
                                                  Foreground="{ui:ThemeResource TextFillColorTertiaryBrush}"
                                                  Text="需要优先的任务，在此Configuration Group执行时，最多尝试的额外次数（失败或者CD过短导致依旧满足条件），防止无限循环，另外，此计数Close任务，Continue Execution会Clear。"
                                                  TextWrapping="Wrap" />
                                    <ui:TextBox Grid.Row="0"
                                                Grid.RowSpan="2"
                                                Grid.Column="1"
                                                MinWidth="120"
                                                Text="{Binding PathingConfig.PreExecutionPriorityConfig.MaxRetryCount}" />
                                </Grid>

                            </StackPanel>
                        </ui:CardExpander>

                    </Grid>   
                                       
                </StackPanel>
            </ui:CardExpander>
            <ui:CardExpander Margin="0,0,0,12"
                             ContentPadding="0">
                <ui:CardExpander.Icon>
                    <ui:FontIcon Glyph="&#xf71d;" Style="{StaticResource FaFontIconStyle}" />
                </ui:CardExpander.Icon>
                <ui:CardExpander.Header>
                    <Grid>

                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto" />
                            <RowDefinition Height="Auto" />
                        </Grid.RowDefinitions>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*" />
                            <ColumnDefinition Width="Auto" />
                        </Grid.ColumnDefinitions>
                        <ui:TextBlock Grid.Row="0"
                                      Grid.Column="0"
                                      FontTypography="Body"
                                      Text="Battle Config"
                                      TextWrapping="Wrap" />
                        <ui:TextBlock Grid.Row="1"
                                      Grid.Column="0"
                                      Foreground="{ui:ThemeResource TextFillColorTertiaryBrush}"
                                      TextWrapping="Wrap">
                            需开启上方Map TrackingConfiguration，开启此项可制定Battle Config，Close此项，则用于Independent Task中的Configuration
                        </ui:TextBlock>
                        <ui:ToggleSwitch Grid.Row="0"
                                         Grid.RowSpan="2"
                                         Grid.Column="1"
                                         Margin="0,0,24,0"
                                         IsChecked="{Binding PathingConfig.AutoFightEnabled, Mode=TwoWay}">
                            <b:Interaction.Triggers>
                                <b:EventTrigger EventName="Checked">
                                    <b:InvokeCommandAction Command="{Binding AutoFightEnabledCheckedCommand}" />
                                </b:EventTrigger>
                            </b:Interaction.Triggers>
                        </ui:ToggleSwitch>
                        <!--    -->
                    </Grid>
                </ui:CardExpander.Header>
                <StackPanel>
                    <Grid Margin="16">
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto" />
                            <RowDefinition Height="Auto" />
                        </Grid.RowDefinitions>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*" />
                            <ColumnDefinition Width="Auto" />
                            <ColumnDefinition Width="Auto" />
                            <ColumnDefinition Width="Auto" />
                        </Grid.ColumnDefinitions>
                        <ui:TextBlock Grid.Row="0"
                                      Grid.Column="0"
                                      FontTypography="Body"
                                      Text="Select Combat Strategy"
                                      TextWrapping="Wrap" />
                        <ui:TextBlock Grid.Row="1"
                                      Grid.Column="0"
                                      Foreground="{ui:ThemeResource TextFillColorTertiaryBrush}"
                                      Text="For Combat"
                                      TextWrapping="Wrap" />
                        <ui:Button Grid.Row="0"
                                   Grid.RowSpan="2"
                                   Grid.Column="1"
                                   Margin="0,0,12,0"
                                   Command="{Binding OpenLocalScriptRepoCommand}"
                                   Content="Script Repository"
                                   Icon="{ui:SymbolIcon Archive24}" />
                        <ui:Button Grid.Row="0"
                                   Grid.RowSpan="2"
                                   Grid.Column="2"
                                   Margin="0,0,12,0"
                                   Command="{Binding OpenFightFolderCommand}"
                                   Content="Open Directory" />
                        <ComboBox Grid.Row="0"
                                  Grid.RowSpan="2"
                                  Grid.Column="3"
                                  Width="180"
                                  Margin="0,0,36,0"
                                  ItemsSource="{Binding AutoFightViewModel.CombatStrategyList}"
                                  SelectedItem="{Binding PathingConfig.AutoFightConfig.StrategyName, Mode=TwoWay}">
                            <b:Interaction.Triggers>
                                <b:EventTrigger EventName="DropDownOpened">
                                    <b:InvokeCommandAction Command="{Binding StrategyDropDownOpenedCommand}" CommandParameter="Combat" />
                                </b:EventTrigger>
                            </b:Interaction.Triggers>
                        </ComboBox>
                    </Grid>
                    <Grid Margin="16">
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto" />
                            <RowDefinition Height="Auto" />
                        </Grid.RowDefinitions>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*" />
                            <ColumnDefinition Width="Auto" />
                        </Grid.ColumnDefinitions>
                        <ui:TextBlock Grid.Row="0"
                                      Grid.Column="0"
                                      FontTypography="Body"
                                      Text="Optimize Action Order Based on Skill CD"
                                      TextWrapping="Wrap" />
                        <ui:TextBlock Grid.Row="1"
                                      Grid.Column="0"
                                      Foreground="{ui:ThemeResource TextFillColorTertiaryBrush}"
                                      Text="Skip skill use if character&apos;s elemental skill CD not finished; fill names or name+CD in seconds; format: Bai Zhu;Zhong Li,12;"
                                      TextWrapping="Wrap" />
                        <ui:TextBox Grid.Row="0"
                                    Grid.RowSpan="2"
                                    Grid.Column="1"
                                    MinWidth="180"
                                    MaxWidth="800"
                                    Margin="0,0,36,0"
                                    Text="{Binding PathingConfig.AutoFightConfig.ActionSchedulerByCd, Mode=TwoWay}"
                                    TextWrapping="Wrap" />
                    </Grid>
                    <Grid Margin="16">

                        <!-- Auto Detect Battle End -->
                        <ui:CardExpander Margin="0,0,36,12"
                                         ContentPadding="0"
                                         IsExpanded="False">

                            <ui:CardExpander.Header>
                                <Grid>

                                    <Grid.RowDefinitions>
                                        <RowDefinition Height="Auto" />
                                        <RowDefinition Height="Auto" />
                                    </Grid.RowDefinitions>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*" />
                                        <ColumnDefinition Width="Auto" />
                                    </Grid.ColumnDefinitions>
                                    <ui:TextBlock Grid.Row="0"
                                                  Grid.Column="0"
                                                  FontTypography="Body"
                                                  Text="Auto Detect Battle End"
                                                  TextWrapping="Wrap" />
                                    <ui:TextBlock Grid.Row="1"
                                                  Grid.Column="0"
                                                  Foreground="{ui:ThemeResource TextFillColorTertiaryBrush}"
                                                  Text="Stop Auto Combat Features when battle ends"
                                                  TextWrapping="Wrap" />
                                    <ui:ToggleSwitch Grid.Row="0"
                                                     Grid.RowSpan="2"
                                                     Grid.Column="1"
                                                     Margin="0,0,24,0"
                                                     IsChecked="{Binding PathingConfig.AutoFightConfig.FightFinishDetectEnabled, Mode=TwoWay}" />
                                </Grid>
                            </ui:CardExpander.Header>
                            <StackPanel>
                                <Grid Margin="16">
                                    <Grid.RowDefinitions>
                                        <RowDefinition Height="Auto" />
                                        <RowDefinition Height="Auto" />
                                    </Grid.RowDefinitions>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*" />
                                        <ColumnDefinition Width="Auto" />
                                    </Grid.ColumnDefinitions>
                                    <Grid Margin="16">

                                        <ui:CardExpander Margin="0,0,0,12"
                                                         ContentPadding="0"
                                                         IsExpanded="False">

                                            <ui:CardExpander.Header>
                                                <Grid>

                                                    <Grid.RowDefinitions>
                                                        <RowDefinition Height="Auto" />
                                                        <RowDefinition Height="Auto" />
                                                    </Grid.RowDefinitions>
                                                    <Grid.ColumnDefinitions>
                                                        <ColumnDefinition Width="*" />
                                                        <ColumnDefinition Width="Auto" />
                                                    </Grid.ColumnDefinitions>
                                                    <ui:TextBlock Grid.Row="0"
                                                                  Grid.Column="0"
                                                                  FontTypography="Body"
                                                                  Text="Faster Battle End Check"
                                                                  TextWrapping="Wrap" />
                                                    <ui:TextBlock Grid.Row="1"
                                                                  Grid.Column="0"
                                                                  Foreground="{ui:ThemeResource TextFillColorTertiaryBrush}"
                                                                  Text="Fast Battle End Check; In Script Loop, Check Every N Seconds (Default 5) or After Specified Character Acts"
                                                                  TextWrapping="Wrap" />
                                                    <ui:ToggleSwitch Grid.Row="0"
                                                                     Grid.RowSpan="2"
                                                                     Grid.Column="1"
                                                                     Margin="0,0,36,0"
                                                                     IsChecked="{Binding PathingConfig.AutoFightConfig.FinishDetectConfig.FastCheckEnabled, Mode=TwoWay}" />
                                                </Grid>
                                            </ui:CardExpander.Header>
                                            <StackPanel>
                                                <Grid Margin="16">
                                                    <Grid.RowDefinitions>
                                                        <RowDefinition Height="Auto" />
                                                        <RowDefinition Height="Auto" />
                                                    </Grid.RowDefinitions>
                                                    <Grid.ColumnDefinitions>
                                                        <ColumnDefinition Width="*" />
                                                        <ColumnDefinition Width="Auto" />
                                                    </Grid.ColumnDefinitions>
                                                    <ui:TextBlock Grid.Row="0"
                                                                  Grid.Column="0"
                                                                  FontTypography="Body"
                                                                  Text="Faster Battle End Check Parameters"
                                                                  TextWrapping="Wrap" />
                                                    <ui:TextBlock Grid.Row="1"
                                                                  Grid.Column="0"
                                                                  Foreground="{ui:ThemeResource TextFillColorTertiaryBrush}"
                                                                  Text="Parameters for Fast Battle End Check; Can Enter Numbers/Names Separated by Semicolon, e.g., 5;Bai Shu;Zhongli. Number = Check Interval in Seconds (≤0 = Disabled), Name = Check After Character Completes Action Round"
                                                                  TextWrapping="Wrap" />
                                                    <ui:TextBox Grid.Row="0"
                                                                Grid.RowSpan="2"
                                                                Grid.Column="1"
                                                                MinWidth="180"
                                                                MaxWidth="800"
                                                                Margin="0,0,36,0"
                                                                Text="{Binding PathingConfig.AutoFightConfig.FinishDetectConfig.FastCheckParams, Mode=TwoWay}"
                                                                TextWrapping="Wrap" />
                                                </Grid>
                                            </StackPanel>
                                        </ui:CardExpander>
                                    </Grid>
                                </Grid>
                                
                                <Grid Margin="16">
                                    <Grid.RowDefinitions>
                                        <RowDefinition Height="Auto" />
                                        <RowDefinition Height="Auto" />
                                    </Grid.RowDefinitions>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*" />
                                        <ColumnDefinition Width="Auto" />
                                    </Grid.ColumnDefinitions>
                                    <ui:TextBlock Grid.Row="0"
                                                  Grid.Column="0"
                                                  FontTypography="Body"
                                                  Text="Rotate to locate enemies (Experimental)"
                                                  TextWrapping="Wrap" />
                                    <ui:TextBlock Grid.Row="1"
                                                  Grid.Column="0"
                                                  HorizontalAlignment="Stretch"
                                                  VerticalAlignment="Stretch"
                                                  Foreground="{ui:ThemeResource TextFillColorTertiaryBrush}"
                                                  Text="(Recommend setting ~1 second for &quot;Faster Battle End Detection&quot;. Before checking battle end in team view, first scan for enemies. If found, move closer and skip detection; if none, rotate to find enemies.)"
                                                  TextWrapping="Wrap" />
                                    <ui:ToggleSwitch Grid.Row="0"
                                                     Grid.RowSpan="2"
                                                     Grid.Column="1"
                                                     Margin="10,0,36,0"
                                                     IsChecked="{Binding  PathingConfig.AutoFightConfig.FinishDetectConfig.RotateFindEnemyEnabled, Mode=TwoWay}" />
                                </Grid>
                                
                                <Grid Margin="16">
                                    <Grid.RowDefinitions>
                                        <RowDefinition Height="Auto" />
                                        <RowDefinition Height="Auto" />
                                    </Grid.RowDefinitions>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*" />
                                        <ColumnDefinition Width="Auto" />
                                    </Grid.ColumnDefinitions>
                                    <ui:TextBlock Grid.Row="0"
                                                  Grid.Column="0"
                                                  FontTypography="Body"
                                                  Text="Delay for Battle End Check"
                                                  TextWrapping="Wrap" />
                                    <ui:TextBlock Grid.Row="1"
                                                  Grid.Column="0"
                                                  Foreground="{ui:ThemeResource TextFillColorTertiaryBrush}"
                                                  Text="Delay for Battle End Check; can vary per character; default 1.5s; format: 2.5;Bai Zhu,1.5;Zhong Li,1.0;"
                                                  TextWrapping="Wrap" />
                                    <ui:TextBox Grid.Row="0"
                                                Grid.RowSpan="2"
                                                Grid.Column="1"
                                                MinWidth="120"
                                                Text="{Binding PathingConfig.AutoFightConfig.FinishDetectConfig.CheckEndDelay}" />
                                </Grid>
                                <Grid Margin="16">
                                    <Grid.RowDefinitions>
                                        <RowDefinition Height="Auto" />
                                        <RowDefinition Height="Auto" />
                                    </Grid.RowDefinitions>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*" />
                                        <ColumnDefinition Width="Auto" />
                                    </Grid.ColumnDefinitions>
                                    <ui:TextBlock Grid.Row="0"
                                                  Grid.Column="0"
                                                  FontTypography="Body"
                                                  Text="Delay After Key Trigger"
                                                  TextWrapping="Wrap" />
                                    <ui:TextBlock Grid.Row="1"
                                                  Grid.Column="0"
                                                  Foreground="{ui:ThemeResource TextFillColorTertiaryBrush}"
                                                  Text="Delay after team switch to check color blocks, default 0.45s; adjust if misdetects"
                                                  TextWrapping="Wrap" />
                                    <ui:TextBox Grid.Row="0"
                                                Grid.RowSpan="2"
                                                Grid.Column="1"
                                                MinWidth="120"
                                                Text="{Binding PathingConfig.AutoFightConfig.FinishDetectConfig.BeforeDetectDelay}" />
                                </Grid>

                            </StackPanel>
                        </ui:CardExpander>
                    </Grid>
                    
                    <!-- Shield/Healer Role Priority for Skill Use -->
                    <ui:CardExpander Margin="16,0,52,12"
                                 ContentPadding="0"
                                 IsExpanded="False">
                    <ui:CardExpander.Header>
                        <Grid>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto" />
                                <RowDefinition Height="Auto" />
                            </Grid.RowDefinitions>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*" />
                                <ColumnDefinition Width="Auto" />
                            </Grid.ColumnDefinitions>
                            <ui:TextBlock Grid.Row="0"
                                          Grid.Column="0"
                                          FontTypography="Body"
                                          Text="Shield/Healer Role Priority for Skill Use"
                                          TextWrapping="Wrap" />
                            <ui:TextBlock Grid.Row="1"
                                          Grid.Column="0"
                                          Foreground="{ui:ThemeResource TextFillColorTertiaryBrush}"
                                          Text="Real-time battle detection and cast shield/healer E skill (disable if empty)"
                                          TextWrapping="Wrap" />
                        </Grid>
                    </ui:CardExpander.Header>
                        
                    <Grid Margin="16">
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto" />
                            <RowDefinition Height="Auto" />
                            <RowDefinition Height="Auto" />
                            <RowDefinition Height="Auto" />
                        </Grid.RowDefinitions>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="Auto" />
                            <ColumnDefinition Width="Auto" />
                            <ColumnDefinition Width="*" />
                            <ColumnDefinition Width="Auto" />
                        </Grid.ColumnDefinitions>

                        <Grid.Resources>
                            <Style x:Key="GuardianVisibilityStyle" TargetType="FrameworkElement">
                                <Setter Property="Visibility" Value="Visible"/>
                                <Style.Triggers>
                                    <DataTrigger Binding="{Binding PathingConfig.AutoFightConfig.GuardianAvatar}" Value=" ">
                                        <Setter Property="Visibility" Value="Collapsed"/>
                                    </DataTrigger>
                                </Style.Triggers>
                            </Style>
                        </Grid.Resources>
                        
                        <ui:TextBlock Grid.Row="0"
                                      Grid.Column="0"
                                      FontTypography="Body"
                                      Text="Shield/Healer Role Position in Team"
                                      TextWrapping="Wrap" />
                        <ui:TextBlock Grid.Row="1"
                                      Grid.Column="0"
                                      Foreground="{ui:ThemeResource TextFillColorTertiaryBrush}"
                                      Text="Real-Time Shield/Healer Skill CD Check"
                                      TextWrapping="Wrap" />
                        
                        <ComboBox Grid.Row="0"
                                  Grid.RowSpan="2"
                                  Grid.Column="1"
                                  MinWidth="80"
                                  HorizontalContentAlignment="Center"
                                  VerticalContentAlignment="Center"
                                  Margin="10,0,10,0"
                                  ItemsSource=' 1234'
                                  SelectedIndex="{Binding PathingConfig.AutoFightConfig.GuardianAvatar, Mode=TwoWay}"
                                  SelectedItem="{Binding PathingConfig.AutoFightConfig.GuardianAvatar, Mode=TwoWay}" />
                            <!--todo ItemsSource=' 1234'导致XAML设计器无法加载-->

                            <ui:TextBlock Grid.Row="0"
                                      Grid.Column="2"
                                      Margin="0,0,8,0"
                                      HorizontalAlignment="Right"
                                      FontTypography="Body"
                                      Text="Disable This Character’s Combat Strategy"
                                      TextWrapping="Wrap"
                                      Style="{StaticResource GuardianVisibilityStyle}"/>

                        <ui:TextBlock Grid.Row="1"
                                      Grid.Column="2"
                                      Margin="0,0,10,0"
                                      HorizontalAlignment="Right"
                                      Foreground="{ui:ThemeResource TextFillColorTertiaryBrush}"
                                      Text="Only Use Shield/Heal Skills (E Skill)"
                                      TextWrapping="Wrap"
                                      Style="{StaticResource GuardianVisibilityStyle}"/>

                        <ui:ToggleSwitch Grid.Row="0"
                                         Grid.RowSpan="2"
                                         Grid.Column="3"
                                         Margin="0,0,36,0"
                                         IsChecked="{Binding PathingConfig.AutoFightConfig.GuardianCombatSkip, Mode=TwoWay}">
                            
                            <ui:ToggleSwitch.Style>
                                <Style TargetType="ui:ToggleSwitch" BasedOn="{StaticResource {x:Type ui:ToggleSwitch}}">
                                    <Setter Property="Visibility" Value="Visible"/>
                                    <Style.Triggers>
                                        <DataTrigger Binding="{Binding PathingConfig.AutoFightConfig.GuardianAvatar}" Value=" ">
                                            <Setter Property="Visibility" Value="Collapsed"/>
                                        </DataTrigger>
                                    </Style.Triggers>
                                </Style>
                            </ui:ToggleSwitch.Style>
                        </ui:ToggleSwitch>
                        
                        <ui:TextBlock Grid.Row="2"
                                      Grid.Column="0" 
                                      Grid.ColumnSpan="3"
                                      Margin="0,10,10,0"
                                      FontTypography="Body"
                                      HorizontalAlignment="Right"
                                      VerticalAlignment="Center"
                                      Text="Monitor Shield/Healer CD Timing; Disable = Before Switching; Enable = Before Each Attack Command (May Desync)"
                                      TextWrapping="Wrap" 
                                      Style="{StaticResource GuardianVisibilityStyle}"/>
                        
                        <ui:ToggleSwitch Grid.Row="2"
                                         Grid.Column="3"
                                         Margin="0,10,36,0" 
                                         VerticalAlignment="Center"
                                         IsChecked="{Binding PathingConfig.AutoFightConfig.SkipModel, Mode=TwoWay}">
                            
                            <ui:ToggleSwitch.Style>
                                <Style TargetType="ui:ToggleSwitch" BasedOn="{StaticResource {x:Type ui:ToggleSwitch}}">
                                    <Setter Property="Visibility" Value="Visible"/>
                                    <Style.Triggers>
                                        <DataTrigger Binding="{Binding PathingConfig.AutoFightConfig.GuardianAvatar}" Value=" ">
                                            <Setter Property="Visibility" Value="Collapsed"/>
                                        </DataTrigger>
                                    </Style.Triggers>
                                </Style>
                            </ui:ToggleSwitch.Style>
                        </ui:ToggleSwitch>
                        
                        <ui:TextBlock Grid.Row="3"
                                      Grid.Column="0" 
                                      Grid.ColumnSpan="3"
                                      Margin="0,10,10,0"
                                      FontTypography="Body"
                                      HorizontalAlignment="Right"
                                      VerticalAlignment="Center"
                                      Text="Monitor Shield/Healer Skill Tap vs Hold; Disable = Tap; Enable = Hold"
                                      TextWrapping="Wrap" 
                                      Style="{StaticResource GuardianVisibilityStyle}"/>
                        
                        <ui:ToggleSwitch Grid.Row="3"
                                         Grid.Column="3"
                                         Margin="0,10,36,0" 
                                         VerticalAlignment="Center"
                                         IsChecked="{Binding PathingConfig.AutoFightConfig.GuardianAvatarHold,Mode=TwoWay}">
                            
                            <ui:ToggleSwitch.Style>
                                <Style TargetType="ui:ToggleSwitch" BasedOn="{StaticResource {x:Type ui:ToggleSwitch}}">
                                    <Setter Property="Visibility" Value="Visible"/>
                                    <Style.Triggers>
                                        <DataTrigger Binding="{Binding PathingConfig.AutoFightConfig.GuardianAvatar}" Value=" ">
                                            <Setter Property="Visibility" Value="Collapsed"/>
                                        </DataTrigger>
                                    </Style.Triggers>
                                </Style>
                            </ui:ToggleSwitch.Style>
                        </ui:ToggleSwitch>
                        
                        
                    </Grid>
                </ui:CardExpander>
                    
                    <Grid Margin="16,10,52,0">

                        <ui:CardExpander Margin="0,0,0,12"
                                         ContentPadding="0"
                                         IsExpanded="False">

                            <ui:CardExpander.Header>
                                <Grid>

                                    <Grid.RowDefinitions>
                                        <RowDefinition Height="Auto" />
                                        <RowDefinition Height="Auto" />
                                    </Grid.RowDefinitions>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*" />
                                        <ColumnDefinition Width="Auto" />
                                    </Grid.ColumnDefinitions>
                                    <ui:TextBlock Grid.Row="0"
                                                  Grid.Column="0"
                                                  FontTypography="Body"
                                                  Text="Auto Pickup Drops"
                                                  TextWrapping="Wrap" />
                                    <ui:TextBlock Grid.Row="1"
                                                  Grid.Column="0"
                                                  Foreground="{ui:ThemeResource TextFillColorTertiaryBrush}"
                                                  Text="Loot Nearby Drops After Battle (Best With Kazuha)"
                                                  TextWrapping="Wrap" />
                                    <ui:ToggleSwitch Grid.Row="0"
                                                     Grid.RowSpan="2"
                                                     Grid.Column="1"
                                                     Margin="0,0,36,0"
                                                     IsChecked="{Binding PathingConfig.AutoFightConfig.PickDropsAfterFightEnabled}" />
                                </Grid>
                            </ui:CardExpander.Header>
                            <StackPanel>
                                <Grid Margin="16">
                                    <Grid.RowDefinitions>
                                        <RowDefinition Height="Auto" />
                                        <RowDefinition Height="Auto" />
                                    </Grid.RowDefinitions>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*" />
                                        <ColumnDefinition Width="Auto" />
                                    </Grid.ColumnDefinitions>
                                    <ui:TextBlock Grid.Row="0"
                                                  Grid.Column="0"
                                                  FontTypography="Body"
                                                  Text="Auto Pickup Drops时长"
                                                  TextWrapping="Wrap" />
                                    <ui:TextBlock Grid.Row="1"
                                                  Grid.Column="0"
                                                  Foreground="{ui:ThemeResource TextFillColorTertiaryBrush}"
                                                  Text="Unit in Seconds; 0 = Do Not Auto-Pickup Loot"
                                                  TextWrapping="Wrap" />
                                    <ui:TextBox Grid.Row="0"
                                                Grid.RowSpan="2"
                                                Grid.Column="1"
                                                MinWidth="120"
                                                Margin="0,0,36,0"
                                                Text="{Binding PathingConfig.AutoFightConfig.PickDropsAfterFightSeconds}" />
                                </Grid>
                            </StackPanel>
                        </ui:CardExpander>
                    </Grid>
                    <Grid Margin="16">
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto" />
                            <RowDefinition Height="Auto" />
                        </Grid.RowDefinitions>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*" />
                            <ColumnDefinition Width="Auto" />
                        </Grid.ColumnDefinitions>
                        <ui:TextBlock Grid.Row="0"
                                      Grid.Column="0"
                                      FontTypography="Body"
                                      Text="Execute Kazuha E After Battle"
                                      TextWrapping="Wrap" />
                        <ui:TextBlock Grid.Row="1"
                                      Grid.Column="0"
                                      Foreground="{ui:ThemeResource TextFillColorTertiaryBrush}"
                                      Text="After battle, if Kazuha present, execute Kazuha E to pick up materials"
                                      TextWrapping="Wrap" />
                        <ui:ToggleSwitch Grid.Row="0"
                                         Grid.RowSpan="2"
                                         Grid.Column="1"
                                         Margin="0,0,36,0"
                                         IsChecked="{Binding PathingConfig.AutoFightConfig.KazuhaPickupEnabled, Mode=TwoWay}" />
                    </Grid>
                    <Grid Margin="16">
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto" />
                            <RowDefinition Height="Auto" />
                        </Grid.RowDefinitions>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*" />
                            <ColumnDefinition Width="Auto" />
                        </Grid.ColumnDefinitions>
                        <ui:TextBlock Grid.Row="0"
                                      Grid.Column="0"
                                      FontTypography="Body"
                                      Text="Loot Battle Count Threshold"
                                      TextWrapping="Wrap" />
                        <ui:TextBlock Grid.Row="1"
                                      Grid.Column="0"
                                      Foreground="{ui:ThemeResource TextFillColorTertiaryBrush}"
                                      Text="Loot Battle Count Threshold: skip drops and Kazuha pickup if battles &lt; threshold; effective only if ≥2"
                                      TextWrapping="Wrap" />
                        <ui:TextBox Grid.Row="0"
                                    Grid.RowSpan="2"
                                    Grid.Column="1"
                                    MinWidth="120"
                                    Margin="0,0,36,0"
                                    Text="{Binding PathingConfig.AutoFightConfig.BattleThresholdForLoot}" />
                    </Grid>
                    <Grid Margin="16">
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto" />
                            <RowDefinition Height="Auto" />
                        </Grid.RowDefinitions>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*" />
                            <ColumnDefinition Width="Auto" />
                        </Grid.ColumnDefinitions>
                        <ui:TextBlock Grid.Row="0"
                                      Grid.Column="0"
                                      FontTypography="Body"
                                      Text="Elite Loot Only Mode"
                                      TextWrapping="Wrap" />
                        <ui:TextBlock Grid.Row="1"
                                      Grid.Column="0"
                                      Foreground="{ui:ThemeResource TextFillColorTertiaryBrush}"
                                      Text="Requires path file; enable monster distinction; elite monsters marked for pickup; non-elite drops can Auto Pickup but Kazuha pickup ignored; non-elite disabled disables pickup"
                                      TextWrapping="Wrap" />
                        <ComboBox Grid.Row="0"
                                  Grid.RowSpan="2"
                                  Grid.Column="1"
                                  MinWidth="100"
                                  SelectedValuePath="Key"
                                  DisplayMemberPath="Value"
                                  ItemsSource="{Binding OnlyPickEliteDropsSource}"
                                  SelectedValue="{Binding PathingConfig.AutoFightConfig.OnlyPickEliteDropsMode}" />
                    </Grid>

                    <Grid Margin="16">
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto" />
                            <RowDefinition Height="Auto" />
                        </Grid.RowDefinitions>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*" />
                            <ColumnDefinition Width="Auto" />
                        </Grid.ColumnDefinitions>
                        <ui:TextBlock Grid.Row="0"
                                      Grid.Column="0"
                                      FontTypography="Body"
                                      Text="Kazuha Pickup Team Name"
                                      TextWrapping="Wrap" />
                        <ui:TextBlock Grid.Row="1"
                                      Grid.Column="0"
                                      Foreground="{ui:ThemeResource TextFillColorTertiaryBrush}"
                                      Text="After battle, if no Kazuha, switch to team with Kazuha; useful for XP farming and compatible strategy across two teams"
                                      TextWrapping="Wrap" />
                        <ui:TextBox Grid.Row="0"
                                    Grid.RowSpan="2"
                                    Grid.Column="1"
                                    MinWidth="120"
                                    Margin="0,0,36,0"
                                    Text="{Binding PathingConfig.AutoFightConfig.KazuhaPartyName}" />
                    </Grid>
                    <Grid Margin="16">
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto" />
                            <RowDefinition Height="Auto" />
                        </Grid.RowDefinitions>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*" />
                            <ColumnDefinition Width="Auto" />
                        </Grid.ColumnDefinitions>
                        <ui:TextBlock Grid.Row="0"
                                      Grid.Column="0"
                                      FontTypography="Body"
                                      Text="Battle Timeout (sec)"
                                      TextWrapping="Wrap" />
                        <ui:TextBlock Grid.Row="1"
                                      Grid.Column="0"
                                      Foreground="{ui:ThemeResource TextFillColorTertiaryBrush}"
                                      Text="Auto stop battle after time limit"
                                      TextWrapping="Wrap" />
                        <ui:TextBox Grid.Row="0"
                                    Grid.RowSpan="2"
                                    Grid.Column="1"
                                    MinWidth="120"
                                    Margin="0,0,36,0"
                                    Text="{Binding PathingConfig.AutoFightConfig.Timeout}" />
                    </Grid>
                </StackPanel>
            </ui:CardExpander>
            <!-- 自动吃食物 -->
            <ui:CardExpander Margin="0,0,0,12" ContentPadding="0">
                <ui:CardExpander.Icon>
                    <ui:FontIcon Glyph="&#x1F35C;" Style="{StaticResource FaFontIconStyle}" />
                </ui:CardExpander.Icon>
                <ui:CardExpander.Header>
                    <Grid>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto" />
                            <RowDefinition Height="Auto" />
                        </Grid.RowDefinitions>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*" />
                            <ColumnDefinition Width="Auto" />
                        </Grid.ColumnDefinitions>
                        <ui:TextBlock Grid.Row="0"
                                  Grid.Column="0"
                                  FontTypography="Body"
                                  Text=""
                                  TextWrapping="Wrap">
                            Auto Use Food Config
                            <Hyperlink Command="{Binding GoToAutoEatUrlCommand}"
                                   Foreground="{ui:ThemeResource TextFillColorSecondaryBrush}">
                                Click to View Invocation Methods
                            </Hyperlink>
                        </ui:TextBlock>
                        <ui:TextBlock Grid.Row="1"
                                  Grid.Column="0"
                                  Foreground="{ui:ThemeResource TextFillColorTertiaryBrush}"
                                  TextWrapping="Wrap">
                            Buff-type Food Config for JS Script; ignore prefixes like &quot;Delicious&quot;, fill name without prefix
                        </ui:TextBlock>
                    </Grid>
                </ui:CardExpander.Header>
                <StackPanel>
                    <Grid Margin="16">
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto" />
                            <RowDefinition Height="Auto" />
                        </Grid.RowDefinitions>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="3*" />
                            <ColumnDefinition Width="2*" />
                        </Grid.ColumnDefinitions>
                        <ui:TextBlock Grid.Row="0"
                                  Grid.Column="0"
                                  FontTypography="Body"
                                  Text="Default Attack Food Name"
                                  TextWrapping="Wrap" />
                        <ui:TextBlock Grid.Row="1"
                                  Grid.Column="0"
                                  Foreground="{ui:ThemeResource TextFillColorTertiaryBrush}"
                                  TextWrapping="Wrap">
                            Used When Param &quot;foodEffectType&quot;:1
                        </ui:TextBlock>
                        <ui:TextBox Grid.Row="0"
                                Grid.RowSpan="2"
                                Grid.Column="1"
                                MinWidth="180"
                                MaxWidth="800"
                                Margin="0,0,36,0"
                                Text="{Binding PathingConfig.AutoEatConfig.DefaultAtkBoostingDishName, Mode=TwoWay}"
                                TextWrapping="Wrap" Cursor="IBeam" />
                    </Grid>
                    <Grid Margin="16">
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto" />
                            <RowDefinition Height="Auto" />
                        </Grid.RowDefinitions>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="3*" />
                            <ColumnDefinition Width="2*" />
                        </Grid.ColumnDefinitions>
                        <ui:TextBlock Grid.Row="0"
                                  Grid.Column="0"
                                  FontTypography="Body"
                                  Text="Default Adventure Food Name"
                                  TextWrapping="Wrap" />
                        <ui:TextBlock Grid.Row="1"
                                  Grid.Column="0"
                                  Foreground="{ui:ThemeResource TextFillColorTertiaryBrush}"
                                  TextWrapping="Wrap">
                            Used When Param &quot;foodEffectType&quot;:2
                        </ui:TextBlock>
                        <ui:TextBox Grid.Row="0"
                                Grid.RowSpan="2"
                                Grid.Column="1"
                                MinWidth="180"
                                MaxWidth="800"
                                Margin="0,0,36,0"
                                Text="{Binding PathingConfig.AutoEatConfig.DefaultAdventurersDishName, Mode=TwoWay}"
                                TextWrapping="Wrap" Cursor="IBeam" />
                    </Grid>
                    <Grid Margin="16">
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto" />
                            <RowDefinition Height="Auto" />
                        </Grid.RowDefinitions>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="3*" />
                            <ColumnDefinition Width="2*" />
                        </Grid.ColumnDefinitions>
                        <ui:TextBlock Grid.Row="0"
                                  Grid.Column="0"
                                  FontTypography="Body"
                                  Text="Default Defense Food Name"
                                  TextWrapping="Wrap" />
                        <ui:TextBlock Grid.Row="1"
                                  Grid.Column="0"
                                  Foreground="{ui:ThemeResource TextFillColorTertiaryBrush}"
                                  TextWrapping="Wrap">
                            Used When Param &quot;foodEffectType&quot;:3
                        </ui:TextBlock>
                        <ui:TextBox Grid.Row="0"
                                Grid.RowSpan="2"
                                Grid.Column="1"
                                MinWidth="180"
                                MaxWidth="800"
                                Margin="0,0,36,0"
                                Text="{Binding PathingConfig.AutoEatConfig.DefaultDefBoostingDishName, Mode=TwoWay}"
                                TextWrapping="Wrap" Cursor="IBeam" />
                    </Grid>
                </StackPanel>
            </ui:CardExpander>
            <ui:CardExpander Margin="0,0,0,12"
                             ContentPadding="0"
                             Icon="{ui:SymbolIcon FlashSettings24}">
                <ui:CardExpander.Header>
                    <Grid>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto" />
                            <RowDefinition Height="Auto" />
                        </Grid.RowDefinitions>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*" />
                            <ColumnDefinition Width="Auto" />
                        </Grid.ColumnDefinitions>
                        <ui:TextBlock Grid.Row="0"
                                      Grid.Column="0"
                                      FontTypography="Body"
                                      Text="Shell Execution Config"
                                      TextWrapping="Wrap" />
                        <ui:TextBlock Grid.Row="1"
                                      Grid.Column="0"
                                      Foreground="{ui:ThemeResource TextFillColorTertiaryBrush}"
                                      TextWrapping="Wrap">
                            Shell commands in this group use this configuration; if disabled, default configuration used
                        </ui:TextBlock>
                        <ui:ToggleSwitch Grid.Row="0"
                                         Grid.RowSpan="2"
                                         Grid.Column="1"
                                         Margin="0,0,24,0"
                                         IsChecked="{Binding ScriptGroupConfig.EnableShellConfig, Mode=TwoWay}" />
                    </Grid>
                </ui:CardExpander.Header>
                <StackPanel>
                    <Grid Margin="16">
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto" />
                            <RowDefinition Height="Auto" />
                        </Grid.RowDefinitions>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*" />
                            <ColumnDefinition Width="Auto" />
                        </Grid.ColumnDefinitions>
                        <ui:TextBlock Grid.Row="0"
                                      Grid.Column="0"
                                      FontTypography="Body"
                                      Text="Disable Shell Tasks"
                                      TextWrapping="Wrap" />
                        <ui:TextBlock Grid.Row="1"
                                      Grid.Column="0"
                                      Foreground="{ui:ThemeResource TextFillColorTertiaryBrush}"
                                      Text="If Enabled, Shell Tasks Are Skipped"
                                      TextWrapping="Wrap" />
                        <ui:ToggleSwitch Grid.Row="0"
                                         Grid.RowSpan="2"
                                         Grid.Column="1"
                                         IsChecked="{Binding ShellConfig.Disable}" />
                    </Grid>
                    <Grid Margin="16">
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto" />
                            <RowDefinition Height="Auto" />
                        </Grid.RowDefinitions>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*" />
                            <ColumnDefinition Width="Auto" />
                        </Grid.ColumnDefinitions>
                        <ui:TextBlock Grid.Row="0"
                                      Grid.Column="0"
                                      FontTypography="Body"
                                      Text="Shell Execution Timeout"
                                      TextWrapping="Wrap" />
                        <ui:TextBlock Grid.Row="1"
                                      Grid.Column="0"
                                      Foreground="{ui:ThemeResource TextFillColorTertiaryBrush}"
                                      Text="0则不等待，直接返回。 = Max wait time for command return (s); &lt;=0 returns immediately=0则不等待，直接返回。"
                                      TextWrapping="Wrap" />
                        <ui:TextBox Grid.Row="0"
                                    Grid.RowSpan="2"
                                    Grid.Column="1"
                                    MinWidth="120"
                                    Text="{Binding ShellConfig.Timeout}" />
                    </Grid>
                    <Grid Margin="16">
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto" />
                            <RowDefinition Height="Auto" />
                        </Grid.RowDefinitions>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*" />
                            <ColumnDefinition Width="Auto" />
                        </Grid.ColumnDefinitions>
                        <ui:TextBlock Grid.Row="0"
                                      Grid.Column="0"
                                      FontTypography="Body"
                                      Text="Hide Command Execution Window"
                                      TextWrapping="Wrap" />
                        <ui:TextBlock Grid.Row="1"
                                      Grid.Column="0"
                                      Foreground="{ui:ThemeResource TextFillColorTertiaryBrush}"
                                      Text="Recommended to Enable, Otherwise a Large Black Box Appears"
                                      TextWrapping="Wrap" />
                        <ui:ToggleSwitch Grid.Row="0"
                                         Grid.RowSpan="2"
                                         Grid.Column="1"
                                         IsChecked="{Binding ShellConfig.NoWindow}" />
                    </Grid>
                    <Grid Margin="16">
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto" />
                            <RowDefinition Height="Auto" />
                        </Grid.RowDefinitions>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*" />
                            <ColumnDefinition Width="Auto" />
                        </Grid.ColumnDefinitions>
                        <ui:TextBlock Grid.Row="0"
                                      Grid.Column="0"
                                      FontTypography="Body"
                                      Text="Log Command Output"
                                      TextWrapping="Wrap" />
                        <ui:TextBlock Grid.Row="1"
                                      Grid.Column="0"
                                      Foreground="{ui:ThemeResource TextFillColorTertiaryBrush}"
                                      Text="Show command output in log if enabled; only shows successful commands with output"
                                      TextWrapping="Wrap" />
                        <ui:ToggleSwitch Grid.Row="0"
                                         Grid.RowSpan="2"
                                         Grid.Column="1"
                                         IsChecked="{Binding ShellConfig.Output}" />
                    </Grid>
                </StackPanel>
            </ui:CardExpander>

            <!--<ui:CardExpander Margin="0,0,0,12"
                             ContentPadding="0"
                             Icon="{ui:SymbolIcon Map24}"
                             IsExpanded="True">
                <ui:CardExpander.Header>
                    <Grid>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto" />
                            <RowDefinition Height="Auto" />
                        </Grid.RowDefinitions>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*" />
                            <ColumnDefinition Width="Auto" />
                        </Grid.ColumnDefinitions>
                        <ui:TextBlock Grid.Row="0"
                                      Grid.Column="0"
                                      FontTypography="Body"
                                      Text="Map TrackingActionConfiguration"
                                      TextWrapping="Wrap" />
                        <ui:TextBlock Grid.Row="1"
                                      Grid.Column="0"
                                      Foreground="{ui:ThemeResource TextFillColorTertiaryBrush}"
                                      TextWrapping="Wrap">
                            Map Tracking到达目标点的时候会执行一些Action，有些Action必须Configuration对应角色在队伍内的位置
                        </ui:TextBlock>

                    </Grid>
                </ui:CardExpander.Header>
                <StackPanel>
                    <Grid Margin="16">
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto" />
                            <RowDefinition Height="Auto" />
                        </Grid.RowDefinitions>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*" />
                            <ColumnDefinition Width="Auto" />
                        </Grid.ColumnDefinitions>
                        <ui:TextBlock Grid.Row="0"
                                      Grid.Column="0"
                                      FontTypography="Body"
                                      Text="Character Number for Normal Attack in Team"
                                      TextWrapping="Wrap" />
                        <ui:TextBlock Grid.Row="1"
                                      Grid.Column="0"
                                      Foreground="{ui:ThemeResource TextFillColorTertiaryBrush}"
                                      Text="Usually For Collecting Element-React Plants"
                                      TextWrapping="Wrap" />
                        <ComboBox Grid.Row="0"
                                  Grid.RowSpan="2"
                                  Grid.Column="1"
                                  MinWidth="100"
                                  ItemsSource="{Binding PathingConfig.AvatarIndexList}"
                                  SelectedItem="{Binding PathingConfig.NormalAttackAvatarIndex}" />
                    </Grid>
                    <Grid Margin="16">
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto" />
                            <RowDefinition Height="Auto" />
                        </Grid.RowDefinitions>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*" />
                            <ColumnDefinition Width="Auto" />
                        </Grid.ColumnDefinitions>
                        <ui:TextBlock Grid.Row="0"
                                      Grid.Column="0"
                                      FontTypography="Body"
                                      Text="Character Number in Team for Elemental Skill"
                                      TextWrapping="Wrap" />
                        <ui:TextBlock Grid.Row="1"
                                      Grid.Column="0"
                                      Foreground="{ui:ThemeResource TextFillColorTertiaryBrush}"
                                      Text="For Collecting Cor Lapis, etc."
                                      TextWrapping="Wrap" />
                        <ComboBox Grid.Row="0"
                                  Grid.RowSpan="2"
                                  Grid.Column="1"
                                  MinWidth="100"
                                  ItemsSource="{Binding PathingConfig.AvatarIndexList}"
                                  SelectedItem="{Binding PathingConfig.ElementalSkillAvatarIndex}" />
                    </Grid>
                </StackPanel>
            </ui:CardExpander>-->
        </StackPanel>
    </ScrollViewer>
</UserControl>